@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/ManagerLayout.cshtml";

    if (Session["userID"] == null)
    {
        Response.Redirect("~/Login/Index");
    }
}
<link href="~/Content/adminstyles/select2-min.css" rel="stylesheet" />
<link href="~/Content/adminstyles/Settings.css" rel="stylesheet" />
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


<!-- PAGE CONTENT-->
<div class="page-content--bgf7">
    <!-- BREADCRUMB-->
    <section class="au-breadcrumb2">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="au-breadcrumb-content">
                        <div class="au-breadcrumb-left">
                            <span class="au-breadcrumb-span">You are here:</span>
                            <ul class="list-unstyled list-inline au-breadcrumb__list">
                                <li class="list-inline-item active">
                                    <a href="#">Manager</a>
                                </li>
                                <li class="list-inline-item seprate">
                                    <span>/</span>
                                </li>
                                <li class="list-inline-item">Dashboard</li>
                            </ul>
                        </div>
                        <form class="au-form-icon--sm  hidden" action="" method="post">
                            <input class="au-input--w300 au-input--style2" type="text" placeholder="Search for datas &amp; reports...">
                            <button class="au-btn--submit2" type="submit">
                                <i class="zmdi zmdi-search"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- END BREADCRUMB-->
    <!-- WELCOME-->
    <section class="welcome p-t-10">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1 class="title-4">
                        Welcome back
                        <span>@Session["name"]!</span>
                    </h1>
                    <hr class="line-seprate">
                </div>
            </div>
        </div>
    </section>
    <!-- END WELCOME-->
    <!-- STATISTIC-->

    <section class="statistic statistic2">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h3 class="title-5 m-b-35">Current Issues</h3>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="statistic__item statistic__item--red">
                        <h2 class="number"> @ViewBag.BrakedownCount</h2>
                        <span class="desc">Machine Brakedown</span>
                        <div class="icon">
                            <i class="zmdi zmdi-settings zmdi-hc-spin"></i>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="statistic__item statistic__item--blue">
                        <h2 class="number">@ViewBag.ITIsuue</h2>
                        <span class="desc">IT/SoftWare Issue</span>
                        <div class="icon">
                            <i class="zmdi  zmdi-windows"></i>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="statistic__item statistic__item--green">
                        <h2 class="number">@ViewBag.TechnicalIssue</h2>
                        <span class="desc">Technical Issue</span>
                        <div class="icon">
                            <i class="fas fa-wrench"></i>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="statistic__item statistic__item--orange">
                        <h2 class="number">@ViewBag.MaterialDelayCount</h2>
                        <span class="desc">Material Delay</span>
                        <div class="icon">
                            <i class="zmdi animated infinite wobble zmdi-shopping-cart"></i>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="statistic__item statistic__item--blue">
                        <h2 class="number">@ViewBag.QualityIsuue</h2>
                        <span class="desc">Qulity Isse</span>
                        <div class="icon">
                            <i class="zmdi zmdi-brightness-auto"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- END STATISTIC-->
    <!-- STATISTIC CHART-->
            <section class="p-t-20">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12" style="margin-bottom:50px;background-color:white;padding:20px;">

                            <h3 class="title-3 m-b-30">Total issue Occurences by month</h3>
                            <p style="margin-top:-30px" class="title-7 m-xs-r-5">In 2019</p>
                            <div id="linechart_material" width=100% height=100% style="margin-top:20px;"></div>
                        </div>
                    </div>
                </div>
            </section>

            <div class="row">
                <div class="col-md-6 col-lg-4">
                    <!-- CHART-->
                    <div class="statistic-chart-1">

                        <h3 class="title-3 m-b-30">Top Issues</h3>
                        <p style="margin-top:-30px" class="title-7 m-xs-r-5">In month of December</p>

                        <div id="columnchart_values" style="width: 100%; height: 100%; " data-toggle="tooltip" title="This chart shows Top 10 Material delays and Machine breakdowns">


                        </div>
                        <div class="row" style="margin:10px;">
                            <div class="col-lg-12">
                                <select class="js-example-placeholder-single js-states form-control" id="issueSelectBox" name="issueSelectBox">
                                    <option></option>
                                    <option>Machine Breakdown</option>
                                    <option>Material Delay</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- END CHART-->
                </div>
                <div class="col-md-6 col-lg-4">
                    <!-- TOP CAMPAIGN-->
                    <div class="top-campaign">
                        <h3 class="title-3 m-b-30">Top 10 Issues took longets time to fix</h3>
                        <p style="margin-top:-30px" class="title-7 m-xs-r-5">In month of December</p>
                        <div class="table-responsive">
                            <table class="table table-top-campaign">
                                <tbody>
                                    <tr>
                                        <td>1. Australia</td>
                                        <td>$70,261.65</td>
                                    </tr>
                                    <tr>
                                        <td>2. United Kingdom</td>
                                        <td>$46,399.22</td>
                                    </tr>
                                    <tr>
                                        <td>3. Turkey</td>
                                        <td>$35,364.90</td>
                                    </tr>
                                    <tr>
                                        <td>4. Germany</td>
                                        <td>$20,366.96</td>
                                    </tr>
                                    <tr>
                                        <td>5. France</td>
                                        <td>$10,366.96</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- END TOP CAMPAIGN-->
                </div>
                <div class="col-md-6 col-lg-4">
                    <!-- CHART PERCENT-->
                    <div class="chart-percent-2">
                        <h3 class="title-3 m-b-30">Number of Issues by Type</h3>
                        <p style="margin-top:-30px" class="title-7 m-xs-r-5">In month of December</p>
                        <div id="piechart_3d" style="width: 100%; height: 100%;"></div>

                    </div>
                </div>
                <!-- END CHART PERCENT-->
            </div>
        </div>
</div>
    </section>
<!-- END STATISTIC CHART-->
<!-- DATA TABLE-->
<section class="p-t-20">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h3 class="title-5 m-b-35">data table</h3>
                <div class="table-data__tool">
                    <div class="table-data__tool-left">
                        <div class="rs-select2--light rs-select2--md">
                            <select class="js-select2" name="property">
                                <option selected="selected">All Properties</option>
                                <option value="">Option 1</option>
                                <option value="">Option 2</option>
                            </select>
                            <div class="dropDownSelect2"></div>
                        </div>
                        <div class="rs-select2--light rs-select2--sm">
                            <select class="js-select2" name="time">
                                <option selected="selected">Today</option>
                                <option value="">3 Days</option>
                                <option value="">1 Week</option>
                            </select>
                            <div class="dropDownSelect2"></div>
                        </div>
                        <button class="au-btn-filter">
                            <i class="zmdi zmdi-filter-list"></i>filters
                        </button>
                    </div>
                    <div class="table-data__tool-right">
                        <button class="au-btn au-btn-icon au-btn--green au-btn--small">
                            <i class="zmdi zmdi-plus"></i>add item
                        </button>
                        <div class="rs-select2--dark rs-select2--sm rs-select2--dark2">
                            <select class="js-select2" name="type">
                                <option selected="selected">Export</option>
                                <option value="">Option 1</option>
                                <option value="">Option 2</option>
                            </select>
                            <div class="dropDownSelect2"></div>
                        </div>
                    </div>
                </div>
                <div class="table-responsive table-responsive-data2">
                    <table class="table table-data2">
                        <thead>
                            <tr>
                                <th>
                                    <label class="au-checkbox">
                                        <input type="checkbox">
                                        <span class="au-checkmark"></span>
                                    </label>
                                </th>
                                <th>name</th>
                                <th>email</th>
                                <th>description</th>
                                <th>date</th>
                                <th>status</th>
                                <th>price</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="tr-shadow">
                                <td>
                                    <label class="au-checkbox">
                                        <input type="checkbox">
                                        <span class="au-checkmark"></span>
                                    </label>
                                </td>
                                <td>Lori Lynch</td>
                                <td>
                                    <span class="block-email">lori@example.com</span>
                                </td>
                                <td class="desc">Samsung S8 Black</td>
                                <td>2018-09-27 02:12</td>
                                <td>
                                    <span class="status--process">Processed</span>
                                </td>
                                <td>$679.00</td>
                                <td>
                                    <div class="table-data-feature">
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Send">
                                            <i class="zmdi zmdi-mail-send"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Edit">
                                            <i class="zmdi zmdi-edit"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Delete">
                                            <i class="zmdi zmdi-delete"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="More">
                                            <i class="zmdi zmdi-more"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr class="spacer"></tr>
                            <tr class="tr-shadow">
                                <td>
                                    <label class="au-checkbox">
                                        <input type="checkbox">
                                        <span class="au-checkmark"></span>
                                    </label>
                                </td>
                                <td>Lori Lynch</td>
                                <td>
                                    <span class="block-email">john@example.com</span>
                                </td>
                                <td class="desc">iPhone X 64Gb Grey</td>
                                <td>2018-09-29 05:57</td>
                                <td>
                                    <span class="status--process">Processed</span>
                                </td>
                                <td>$999.00</td>
                                <td>
                                    <div class="table-data-feature">
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Send">
                                            <i class="zmdi zmdi-mail-send"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Edit">
                                            <i class="zmdi zmdi-edit"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Delete">
                                            <i class="zmdi zmdi-delete"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="More">
                                            <i class="zmdi zmdi-more"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr class="spacer"></tr>
                            <tr class="tr-shadow">
                                <td>
                                    <label class="au-checkbox">
                                        <input type="checkbox">
                                        <span class="au-checkmark"></span>
                                    </label>
                                </td>
                                <td>Lori Lynch</td>
                                <td>
                                    <span class="block-email">lyn@example.com</span>
                                </td>
                                <td class="desc">iPhone X 256Gb Black</td>
                                <td>2018-09-25 19:03</td>
                                <td>
                                    <span class="status--denied">Denied</span>
                                </td>
                                <td>$1199.00</td>
                                <td>
                                    <div class="table-data-feature">
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Send">
                                            <i class="zmdi zmdi-mail-send"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Edit">
                                            <i class="zmdi zmdi-edit"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Delete">
                                            <i class="zmdi zmdi-delete"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="More">
                                            <i class="zmdi zmdi-more"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr class="spacer"></tr>
                            <tr class="tr-shadow">
                                <td>
                                    <label class="au-checkbox">
                                        <input type="checkbox">
                                        <span class="au-checkmark"></span>
                                    </label>
                                </td>
                                <td>Lori Lynch</td>
                                <td>
                                    <span class="block-email">doe@example.com</span>
                                </td>
                                <td class="desc">Camera C430W 4k</td>
                                <td>2018-09-24 19:10</td>
                                <td>
                                    <span class="status--process">Processed</span>
                                </td>
                                <td>$699.00</td>
                                <td>
                                    <div class="table-data-feature">
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Send">
                                            <i class="zmdi zmdi-mail-send"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Edit">
                                            <i class="zmdi zmdi-edit"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="Delete">
                                            <i class="zmdi zmdi-delete"></i>
                                        </button>
                                        <button class="item" data-toggle="tooltip" data-placement="top" title="More">
                                            <i class="zmdi zmdi-more"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- END DATA TABLE-->
<script src="~/Scripts/AdminScripts/jscolar.js"></script>
<script src="~/Scripts/jquery-3.3.1.js"></script>
<script src="~/Scripts/AdminScripts/select2-min.js"></script>
<script>
    $('#issueSelectBox').select2({
        minimumResultsForSearch: -1,
        placeholder: "Select issue.....",
        allowClear: false
    });
</script>

<script>
    google.charts.load('current', { 'packages': ['line'] });
    google.charts.setOnLoadCallback(drawChart_line);

    function drawChart_line() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Month');
        data.addColumn('number', 'Total');
        data.addColumn('number', 'IT');
        data.addColumn('number', 'Material');
        data.addColumn('number', 'Machine');
        data.addColumn('number', 'Quality');
        data.addColumn('number', 'Technical');

         var url = '@Url.Action("drawLineChart", "Manager")'
            $.ajax({
                type: "POST",
                dataType: 'text',
                url: url,
                data: {},
                success: function (itemNameArray) {
                    console.log(JSON.parse(itemNameArray));
                    data.addRows(JSON.parse(itemNameArray));

                },
                error: function () {
                    alert("Error");
                }
        });

       
        var options = {

            width: '100%',
            height: 300,
            legend: {
                position: 'right',
                textStyle:
                {
                    fontSize: 9 // or the number you want
                }
            }
        };

        var chart = new google.charts.Line(document.getElementById('linechart_material'));
        chart.draw(data, google.charts.Line.convertOptions(options));
    }

    google.charts.load("current", {packages: ['corechart'] });
    google.charts.setOnLoadCallback(drawChart_bar);

    function drawChart_bar() {

        var data = google.visualization.arrayToDataTable([
            ["Element", "Density", {role: "style" }],
                ["Coprrrrrrper", 8.94, "#001f3f"],
                ["Silvrrrrrrrer", 10.49, "#0074D9"],
                ["yr5hrrrrruy", 19.30, "#7FDBFF"],
                ["pl4trrrrrm", 21.45, "color: #39CCCC"],
                ["c6perrrrrrr", 8.94, "#3D9970"],
                ["p5thjwewehjit5", 21.45, "#2ECC40"],
                ["ctghjhjhjper", 8.94, "#01FF70"],
                ["S5ykkklklkjr", 10.49, "#FFDC00"],
                ["kh.kjkhjtfd", 19.30, "#FF851B"],
                ["rttytytytylhy", 21.45, "color: #FF4136"]
            ]);

            var view = new google.visualization.DataView(data);
            view.setColumns([0, 1,
                                            {
                    calc: "stringify",
                sourceColumn: 1,
                type: "string",
                role: "annotation"
            },
            2]);

            var options = {

                        bar: {groupWidth: "95%" },
                        legend: {position: "none" },
                        chartArea: {'width': '100%', 'height': '60%', 'top': '0' },
                        hAxis: {
                                    textStyle: {
                                    fontSize: 9 // or the number you want
                            }
                        }
        };

        var chart = new google.visualization.ColumnChart(document.getElementById("columnchart_values"));
        chart.draw(view, options);


    }

    google.charts.load("current", { packages: ["corechart"] });
    google.charts.setOnLoadCallback(drawChart_pie);

    function drawChart_pie() {
        var data = google.visualization.arrayToDataTable([
            ['Issue', 'Number of Occurrence'],
            ['Material Delay', 11],
            ['Quality Issue', 2],
            ['IT Issue', 2],
            ['Technical Issue', 2],
            ['MAchine Breakdown', 7]
        ]);

        var options = {
            is3D: true,
            chartArea: { 'width': '100%', 'height': '80%', 'top': '0' },
            legend: { position: "bottom" }
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
        chart.draw(data, options);
    }

</script>

</script>
</div>